var S=Object.defineProperty,I=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var f=(t,o,r)=>o in t?S(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,a=(t,o)=>{for(var r in o||(o={}))L.call(o,r)&&f(t,r,o[r]);if(p)for(var r of p(o))V.call(o,r)&&f(t,r,o[r]);return t},m=(t,o)=>I(t,P(o));import{V as E}from"./LoadingOverlay.a8746287.js";import{N as F,W as K}from"./WallPosts.8544b33f.js";import{_ as C,m as u,b as N,r as d,o as l,c as h,d as g,w as T,a as s,t as b,g as A,k as w,v as B,l as z,j as v,F as U}from"./index.dc3639a3.js";import{u as M,s as W,p as _}from"./postStore.fbf06d71.js";const j={components:{VueLoader:E,NoPost:F,WallPosts:K},data(){return{authorID:"",author:{avatar:"https://i.imgur.com/K3dyy79.png",followers:[]},timeSort:"desc",searchKeyword:"",isFollow:!1,showFollow:!0}},watch:{searchKeyword:function(){const t=encodeURI(this.searchKeyword);this.getPosts(this.timeSort,t,this.authorID,this.authorID==this.user._id)}},computed:a(a(a({},u(M,["user"])),u(W,["isLoading"])),u(_,["posts"])),methods:m(a({},N(_,["getPosts"])),{getProfile(t){this.isLoading=!0;const o=document.cookie.split("AUTH_TOKEN=").pop().split(";").shift();let r=`https://fierce-headland-11812.herokuapp.com/users/profile/${t}`;this.axios({method:"GET",url:r,headers:{Authorization:`Bearer ${o}`}}).then(i=>{this.isLoading=!1,this.author=i.data.data,i.data.data.followers.forEach(e=>{e._id===this.user._id&&(this.isFollow=!0)}),this.authorID===this.user._id&&(this.showFollow=!1),this.getPosts("desc","",this.authorID,this.authorID==this.user._id)}).catch(i=>{this.isLoading=!1,console.dir(i)})},followAuthor(t){this.isLoading=!0;const o=document.cookie.split("AUTH_TOKEN=").pop().split(";").shift();let r=`https://fierce-headland-11812.herokuapp.com/users/follow/${t}`,i;this.isFollow?i="DELETE":i="POST",this.axios({method:i,url:r,headers:{Authorization:`Bearer ${o}`}}).then(e=>{this.isLoading=!1,i==="DELETE"?this.isFollow=!1:this.isFollow=!0,this.getProfile(t)}).catch(e=>{this.isLoading=!1,console.dir(e)})}}),mounted(){const{id:t}=this.$route.params;this.authorID=t,this.getProfile(t)},unmounted(){this.authorID=null}},H={class:"myPostsBanner mb-4"},O={class:"flex bg-white border-2 border-secondary rounded-lg"},G={class:"w-20 h-20 overflow-hidden mr-2.5 border-r-2 border-secondary"},R=["src","alt"],q={class:"grow flex items-center justify-between p-4"},J={class:"font-noto-sans-tc font-bold text-base mb-1"},Q={class:"font-noto-sans-tc text-sm text-secondary"},X={key:0},Y={class:"flex mb-4"},Z=s("option",{value:"desc"},"\u6700\u65B0\u8CBC\u6587",-1),$=s("option",{value:"asc"},"\u5F9E\u820A\u5230\u6700\u65B0",-1),oo=[Z,$],eo={class:"flex"},to={class:"w-80 lg:w-96"},so={class:"input-group relative flex items-stretch w-full border-2 border-secondary"},ro=s("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"search",class:"w-5",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[s("path",{fill:"currentColor",d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"})],-1),io=[ro];function no(t,o,r,i,e,c){const y=d("VueLoader"),x=d("VLoading"),D=d("WallPosts"),k=d("NoPost");return l(),h(U,null,[g(x,{active:t.isLoading,"z-index":3e3},{default:T(()=>[g(y)]),_:1},8,["active"]),s("div",H,[s("div",O,[s("div",G,[s("img",{class:"object-cover w-full h-full",src:e.author.avatar,alt:`${e.author.name}'s avatar`},null,8,R)]),s("div",q,[s("div",null,[s("p",J,b(e.author.name),1),s("p",Q,b(e.author.followers.length)+" \u4EBA\u8FFD\u8E64 ",1)]),e.showFollow?(l(),h("div",X,[e.isFollow?(l(),h("button",{key:0,onClick:o[0]||(o[0]=n=>c.followAuthor(e.author._id)),type:"button",class:"hover:dialogue rounded-lg py-2 px-8 bg-pink-1 border-2 border-secondary font-bold font-noto-sans-tc"}," \u8FFD\u8E64\u4E2D ")):(l(),h("button",{key:1,onClick:o[1]||(o[1]=n=>c.followAuthor(e.author._id)),type:"button",class:"hover:dialogue rounded-lg py-2 px-8 bg-warning border-2 border-secondary font-bold font-noto-sans-tc"}," \u8FFD\u8E64 "))])):A("",!0)])])]),s("div",Y,[w(s("select",{"onUpdate:modelValue":o[2]||(o[2]=n=>e.timeSort=n),onChange:o[3]||(o[3]=n=>t.getPosts(e.timeSort,e.searchKeyword,e.authorID,e.authorID==t.user._id)),class:"border-2 border-secondary focus:border-indigo-300 py-3 px-4 mr-3"},oo,544),[[B,e.timeSort]]),s("div",eo,[s("div",to,[s("div",so,[w(s("input",{"onUpdate:modelValue":o[4]||(o[4]=n=>e.searchKeyword=n),onChange:o[5]||(o[5]=n=>t.getPosts(e.timeSort,e.searchKeyword,e.authorID,e.authorID==t.user._id)),type:"search",class:"form-control relative flex-auto min-w-0 block w-full py-3 px-4 text-base font-bold text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",placeholder:"\u641C\u5C0B\u8CBC\u6587","aria-label":"Search","aria-describedby":"button-search"},null,544),[[z,e.searchKeyword,void 0,{trim:!0}]]),s("button",{class:"btn px-4 py-3 bg-primary text-white border-l-2 border-secondary hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out flex items-center",type:"button",id:"button-search",onClick:o[6]||(o[6]=n=>t.getPosts(e.timeSort,e.searchKeyword,e.authorID,e.authorID==t.user._id))},io)])])])]),t.posts?(l(),v(D,{key:0,authorID:e.authorID},null,8,["authorID"])):(l(),v(k,{key:1}))],64)}var po=C(j,[["render",no]]);export{po as default};

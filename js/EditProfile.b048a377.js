var y=Object.defineProperty;var u=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var b=(d,e,i)=>e in d?y(d,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[e]=i,f=(d,e)=>{for(var i in e||(e={}))_.call(e,i)&&b(d,i,e[i]);if(u)for(var i of u(e))v.call(e,i)&&b(d,i,e[i]);return d};import{V as P}from"./LoadingOverlay.a8746287.js";import{_ as V,m as L,r as h,o as l,c as r,d as m,w as C,a as s,k as a,l as p,q as w,F as T,i as k}from"./index.dc3639a3.js";import{s as A}from"./postStore.fbf06d71.js";const N={components:{VueLoader:P},data(){return{profile:{avatar:"https://i.imgur.com/K3dyy79.png"},password:{password:"",confirmPassword:""},postsLists:[],status:"editNickname",hiddenPassword:!0,hiddenConfirmPassword:!0}},inject:["emitter"],computed:f({},L(A,["isLoading"])),methods:{getProfile(){this.isLoading=!0;let d="https://fierce-headland-11812.herokuapp.com/users/profile";const e=document.cookie.split("AUTH_TOKEN=").pop().split(";").shift();this.axios({method:"GET",url:d,headers:{Authorization:`Bearer ${e}`}}).then(i=>{this.isLoading=!1,this.profile=i.data.data,this.$emit("get-profile")}).catch(i=>{this.isLoading=!1,console.dir(i)})},editProfile(){this.isLoading=!0;let d="https://fierce-headland-11812.herokuapp.com/users/profile";const e=document.cookie.split("AUTH_TOKEN=").pop().split(";").shift();this.axios({method:"PATCH",url:d,headers:{Authorization:`Bearer ${e}`},data:this.profile}).then(()=>{this.isLoading=!1,this.$emit("get-profile")}).catch(i=>{this.isLoading=!1,console.dir(i)})},uploadAvatar(d){this.isLoading=!0;let e="https://fierce-headland-11812.herokuapp.com/upload";const i=document.cookie.split("AUTH_TOKEN=").pop().split(";").shift();let c=new FormData;const t=d.target.files[0];c.append("file",t),this.axios({method:"POST",url:e,headers:{Authorization:`Bearer ${i}`},data:c}).then(n=>{this.isLoading=!1,this.profile.avatar=n.data.imgUrl}).catch(n=>{this.isLoading=!1,console.dir(n)})},changeBtnVisibility(d){d==1?this.hiddenPassword?this.hiddenPassword=!1:this.hiddenPassword=!0:this.hiddenConfirmPassword?this.hiddenConfirmPassword=!1:this.hiddenConfirmPassword=!0},updatePassword(){this.isLoading=!0;let d="https://fierce-headland-11812.herokuapp.com/users/updatePassword";const e=document.cookie.split("AUTH_TOKEN=").pop().split(";").shift();this.axios({method:"POST",url:d,headers:{Authorization:`Bearer ${e}`},data:this.password}).then(i=>{this.isLoading=!1;const c=i.data.user.token;document.cookie=`AUTH_TOKEN=${c}`}).catch(i=>{this.isLoading=!1,console.dir(i)})}},mounted(){this.getProfile()}},U=s("div",{class:"themeBanner mb-8"},[s("div",{class:"h-20 flex items-center justify-center bg-white border-2 border-secondary"},[s("p",{class:"font-azeret-mono text-xl font-bold text-center"},"\u4FEE\u6539\u500B\u4EBA\u8CC7\u6599")])],-1),B={class:"relative mt-18"},E={class:"absolute flex",style:{top:"-42px",left:"16px"}},j={key:0},z={key:1},O={key:2},H={key:3},K={class:"w-132 p-8 rounded-lg border-2 border-secondary bg-white"},F={key:0,class:"flex flex-col items-center justify-center"},M={class:"h-28 w-28 border-2 border-secondary rounded-full overflow-hidden mb-4"},S=["src","alt"],D={for:"file",class:"relative mb-4 flex items-center justify-center text-white bg-black w-30 h-10"},q=s("button",{type:"button",class:"whitespace-nowrap py-1 px-6"}," \u4E0A\u50B3\u5927\u982D\u7167 ",-1),G={class:"w-80"},R={class:"mb-4"},I={for:"nickname"},J=s("span",{class:"block text-base font-medium text-slate-700"},"\u66B1\u7A31",-1),Q=s("p",null,"\u6027\u5225",-1),W={for:"Male",class:"mr-8"},X=k(" \u7537\u6027 "),Y={for:"Female"},Z=k(" \u5973\u6027 "),$={class:"mt-8 w-full flex justify-center"},ee=s("p",{class:"font-azeret-mono font-bold text-base text-center"}," \u66F4\u65B0\u500B\u4EBA\u6A94\u6848 ",-1),se=[ee],te={key:1,class:"flex flex-col items-center justify-center"},oe={class:"w-80"},ie={class:"mb-4"},de=s("span",{class:"block text-base font-medium text-slate-700"},"\u8F38\u5165\u65B0\u5BC6\u78BC",-1),ne={key:0,class:"relative block",for:"password"},le=s("span",{class:"iconify text-gray-500 text-2xl","data-icon":"bx:show"},null,-1),re=[le],ae={key:1,class:"relative block",for:"password2"},ce=s("span",{class:"iconify text-gray-500 text-2xl","data-icon":"dashicons:hidden"},null,-1),pe=[ce],ue={class:"mb-4"},be=s("span",{class:"block text-base font-medium text-slate-700"},"\u518D\u6B21\u8F38\u5165",-1),fe={key:0,class:"relative block",for:"confirmPassword"},he=s("span",{class:"iconify text-gray-500 text-2xl","data-icon":"bx:show"},null,-1),me=[he],we={key:1,class:"relative block",for:"confirmPassword2"},ke=s("span",{class:"iconify text-gray-500 text-2xl","data-icon":"dashicons:hidden"},null,-1),xe=[ke],ge={class:"mt-8 w-full flex justify-center"},ye=s("p",{class:"font-azeret-mono font-bold text-base text-center"}," \u4FEE\u6539\u5BC6\u78BC ",-1),_e=[ye];function ve(d,e,i,c,t,n){const x=h("VueLoader"),g=h("VLoading");return l(),r(T,null,[m(g,{active:d.isLoading,"z-index":3e3},{default:C(()=>[m(x)]),_:1},8,["active"]),U,s("div",B,[s("ul",E,[t.status==="editNickname"?(l(),r("li",j,[s("button",{onClick:e[0]||(e[0]=o=>t.status="editNickname"),class:"rounded-t-lg py-2 px-6 bg-black text-white border-2 border-secondary"}," \u66B1\u7A31\u4FEE\u6539 ")])):(l(),r("li",z,[s("button",{onClick:e[1]||(e[1]=o=>t.status="editNickname"),class:"rounded-t-lg py-2 px-6 bg-white text-black border-2 border-secondary"}," \u66B1\u7A31\u4FEE\u6539 ")])),t.status==="editPassword"?(l(),r("li",O,[s("button",{onClick:e[2]||(e[2]=o=>t.status="editPassword"),class:"rounded-t-lg py-2 px-6 bg-black text-white border-2 border-secondary"}," \u91CD\u8A2D\u5BC6\u78BC ")])):(l(),r("li",H,[s("button",{onClick:e[3]||(e[3]=o=>t.status="editPassword"),class:"rounded-t-lg py-2 px-6 bg-white text-black border-2 border-secondary"}," \u91CD\u8A2D\u5BC6\u78BC ")]))]),s("div",K,[t.status==="editNickname"?(l(),r("div",F,[s("div",M,[s("img",{class:"object-cover w-full h-full",src:t.profile.avatar,alt:`${t.profile.name}'s avatar`},null,8,S)]),s("label",D,[s("input",{onChange:e[4]||(e[4]=(...o)=>n.uploadAvatar&&n.uploadAvatar(...o)),type:"file",class:"absolute top-0 left-0 cursor-pointer opacity-0 w-full h-full"},null,32),q]),s("div",G,[s("div",R,[s("label",I,[J,a(s("input",{type:"text",name:"nickname",id:"nickname","onUpdate:modelValue":e[5]||(e[5]=o=>t.profile.name=o),class:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500"},null,512),[[p,t.profile.name]])])]),s("div",null,[Q,s("label",W,[a(s("input",{type:"radio",id:"Male",name:"sex","onUpdate:modelValue":e[6]||(e[6]=o=>t.profile.sex=o),value:"Male",class:"mr-3"},null,512),[[w,t.profile.sex]]),X]),s("label",Y,[a(s("input",{type:"radio",id:"Female",name:"sex","onUpdate:modelValue":e[7]||(e[7]=o=>t.profile.sex=o),value:"Female",class:"mr-3"},null,512),[[w,t.profile.sex]]),Z])]),s("div",$,[s("button",{type:"button",onClick:e[8]||(e[8]=o=>n.editProfile()),class:"py-4 border-2 border-secondary bg-gray-2 hover:bg-warning rounded-lg w-80"},se)])])])):(l(),r("div",te,[s("div",oe,[s("div",ie,[de,t.hiddenPassword?(l(),r("label",ne,[a(s("input",{type:"password",name:"password",id:"password","onUpdate:modelValue":e[9]||(e[9]=o=>t.password.password=o),placeholder:"\u8ACB\u8F38\u5165\u65B0\u5BC6\u78BC",class:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500"},null,512),[[p,t.password.password]]),s("button",{onClick:e[10]||(e[10]=o=>n.changeBtnVisibility(1)),class:"absolute inset-y-0 right-1 top-1 flex items-center"},re)])):(l(),r("label",ae,[a(s("input",{type:"text",name:"password2",id:"password2","onUpdate:modelValue":e[11]||(e[11]=o=>t.password.password=o),placeholder:"\u8ACB\u8F38\u5165\u65B0\u5BC6\u78BC",class:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500"},null,512),[[p,t.password.password]]),s("button",{onClick:e[12]||(e[12]=o=>n.changeBtnVisibility(1)),class:"absolute inset-y-0 right-1 top-1 flex items-center"},pe)]))]),s("div",ue,[be,t.hiddenConfirmPassword?(l(),r("label",fe,[a(s("input",{type:"password",name:"confirmPassword",id:"confirmPassword",placeholder:"\u518D\u6B21\u8F38\u5165\u65B0\u5BC6\u78BC","onUpdate:modelValue":e[13]||(e[13]=o=>t.password.confirmPassword=o),class:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500"},null,512),[[p,t.password.confirmPassword]]),s("button",{onClick:e[14]||(e[14]=o=>n.changeBtnVisibility(2)),class:"absolute inset-y-0 right-1 top-1 flex items-center"},me)])):(l(),r("label",we,[a(s("input",{type:"text",name:"confirmPassword2",id:"confirmPassword2",placeholder:"\u518D\u6B21\u8F38\u5165\u65B0\u5BC6\u78BC","onUpdate:modelValue":e[15]||(e[15]=o=>t.password.confirmPassword=o),class:"mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500"},null,512),[[p,t.password.confirmPassword]]),s("button",{onClick:e[16]||(e[16]=o=>n.changeBtnVisibility(2)),class:"absolute inset-y-0 right-1 top-1 flex items-center"},xe)]))])]),s("div",ge,[s("button",{type:"button",onClick:e[17]||(e[17]=o=>n.updatePassword()),class:"py-4 border-2 border-secondary bg-gray-2 hover:bg-warning rounded-lg w-80"},_e)])]))])])],64)}var Te=V(N,[["render",ve]]);export{Te as default};
